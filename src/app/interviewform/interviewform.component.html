<div class="container">
  <div class="form-container mt-4">
    <h1>{{ candidatId ? "Modifcation" : "Création" }} d'un Candidat</h1>

    <form *ngIf="form" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label
          for="candidatName"
          class="form-label"
          [class.text-danger]="
            getControlStatus('name', ['minlength', 'maxlength', 'required'])
          "
          >Nom*
        </label>
        <input
          type="text"
          class="form-control"
          [class.form-invalid]="
            getControlStatus('name', ['minlength', 'maxlength', 'required'])
          "
          id="candidatName"
          placeholder="Doe"
          formControlName="name"
        />
        <small
          *ngIf="getControlStatus('name', ['minlength'])"
          class="text-danger"
          >Le nom doit faire minimum
          {{form.get('name')?.errors?.['minlength'].requiredLength}}
          caractères.</small
        >
        <small
          *ngIf="getControlStatus('name', ['maxlength'])"
          class="text-danger"
          >Le nom doit faire minimum
          {{form.get('name')?.errors?.['maxlength'].requiredLength}}
          caractères. ({{form.get('name')?.errors?.['maxlength'].actualLength}})
        </small>
      </div>
      <div class="mb-3">
        <label
          for="candidatFirstname"
          class="form-label"
          [class.text-danger]="
            getControlStatus('firstname', [
              'minlength',
              'maxlength',
              'required'
            ])
          "
          >Prénom*
        </label>
        <input
          type="text"
          class="form-control"
          [class.form-invalid]="
            getControlStatus('firstname', [
              'minlength',
              'maxlength',
              'required'
            ])
          "
          id="candidatFirstname"
          placeholder="John"
          formControlName="firstname"
        />
        <small
          *ngIf="getControlStatus('firstname', ['minlength'])"
          class="text-danger"
          >Le prénom doit faire minimum
          {{form.get('firstname')?.errors?.['minlength'].requiredLength}}
          caractères.</small
        >
        <small
          *ngIf="getControlStatus('firstname', ['maxlength'])"
          class="text-danger"
          >Le prénom doit faire maximum
          {{form.get('firstname')?.errors?.['maxlength'].requiredLength}}
          caractères. ({{form.get('firstname')?.errors?.['maxlength'].actualLength}}
          )
        </small>
      </div>
      <div class="mb-3">
        <label
          for="statut"
          class="form-label"
          [class.text-danger]="getControlStatus('statut', ['required'])"
          >Statut*
        </label>
        <select
          class="form-select"
          [class.form-invalid]="getControlStatus('status', ['required'])"
          id="statut"
          aria-label="Default select example"
          formControlName="statut"
        >
          <option value="En Cours">En Cours</option>
          <option value="Réponse Positive">Réponse Positive</option>
          <option value="Réponse Négative">Réponse Négative</option>
        </select>
      </div>
      <div class="mb-3">
        <label
          for="compteRendu"
          class="form-label"
          [class.text-danger]="getControlStatus('desc', ['maxlength'])"
          >Compte Rendu
        </label>
        <textarea
          class="form-control"
          [class.form-invalid]="getControlStatus('desc', ['maxlength'])"
          id="compteRendu"
          rows="5"
          formControlName="desc"
        ></textarea>
        <small [class.text-danger]="getControlStatus('desc', ['maxlength'])"
          >{{ form.value?.desc?.length }}/4000
        </small>
      </div>
      <div class="mb-3">
        <label
          for="date"
          class="form-label"
          [class.text-danger]="getControlStatus('date', ['required'])"
          >Date de l'entretien*
        </label>
        <input
          type="date"
          class="form-control form-date"
          [class.form-invalid]="getControlStatus('date', ['required'])"
          id="date"
          formControlName="date"
        />
      </div>
      <div>
        <button
          type="submit"
          class="btn btn-primary me-2"
          [disabled]="!form.valid"
        >
          {{ candidatId ? "Modifier" : "Ajouter" }}
        </button>
        <a class="btn btn-danger" [routerLink]="['/']">Annuler</a>
      </div>
    </form>
  </div>
</div>
