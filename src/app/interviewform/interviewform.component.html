<div class="container">
  <div class="form-container mt-4">
    <h1 *ngIf="!interviewId">Création d'un Candidat</h1>
    <h1 *ngIf="interviewId">Modification d'un Candidat</h1>
    <form *ngIf="form" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label
          for="candidatName"
          class="form-label"
          [class.text-danger]="
            getControlStatus('name', ['minlength', 'maxlength', 'required'])
          "
          >Nom*
        </label>
        <input
          type="text"
          [value]="candidatName"
          class="form-control"
          [class.form-invalid]="
            getControlStatus('name', ['minlength', 'maxlength', 'required'])
          "
          id="candidatName"
          placeholder="Doe"
          formControlName="name"
        />
        <small
          *ngIf="getControlStatus('name', ['minlength'])"
          class="text-danger"
          >Le nom doit faire minimum
          {{form.get('name')?.errors?.['minlength'].requiredLength}}
          caractères.</small
        >
        <small
          *ngIf="getControlStatus('name', ['maxlength'])"
          class="text-danger"
          >Le nom doit faire minimum
          {{form.get('name')?.errors?.['maxlength'].requiredLength}}
          caractères. ({{form.get('name')?.errors?.['maxlength'].actualLength}})
        </small>
      </div>
      <div class="mb-3">
        <label
          for="candidatFirstName"
          class="form-label"
          [class.text-danger]="
            getControlStatus('firstName', [
              'minlength',
              'maxlength',
              'required'
            ])
          "
          >Prénom*
        </label>
        <input
          type="text"
          class="form-control"
          [class.form-invalid]="
            getControlStatus('firstName', [
              'minlength',
              'maxlength',
              'required'
            ])
          "
          id="candidatFirstName"
          placeholder="John"
          formControlName="firstName"
        />
        <small
          *ngIf="getControlStatus('firstName', ['minlength'])"
          class="text-danger"
          >Le prénom doit faire minimum
          {{form.get('firstName')?.errors?.['minlength'].requiredLength}}
          caractères.</small
        >
        <small
          *ngIf="getControlStatus('firstName', ['maxlength'])"
          class="text-danger"
          >Le prénom doit faire maximum
          {{form.get('firstName')?.errors?.['maxlength'].requiredLength}}
          caractères. ({{form.get('firstName')?.errors?.['maxlength'].actualLength}}
          )
        </small>
      </div>
      <div class="mb-3">
        <label
          for="statut"
          class="form-label"
          [class.text-danger]="getControlStatus('statut', ['required'])"
          >Statut*
        </label>
        <select
          class="form-select"
          [class.form-invalid]="getControlStatus('status', ['required'])"
          id="statut"
          aria-label="Default select example"
          formControlName="statut"
        >
          <option value="EC">En Cours</option>
          <option value="RP">Réponse Positive</option>
          <option value="RN">Réponse Négative</option>
        </select>
      </div>
      <div class="mb-3">
        <label
          for="compteRendu"
          class="form-label"
          [class.text-danger]="getControlStatus('desc', ['maxlength'])"
          >Compte Rendu
        </label>
        <textarea
          class="form-control"
          [class.form-invalid]="getControlStatus('desc', ['maxlength'])"
          id="compteRendu"
          rows="5"
          formControlName="desc"
        ></textarea>
        <small [class.text-danger]="getControlStatus('desc', ['maxlength'])"
          >{{ form.value?.desc?.length }}/4000
        </small>
      </div>
      <div class="mb-3">
        <label
          for="date"
          class="form-label"
          [class.text-danger]="getControlStatus('date', ['required'])"
          >Date de l'entretien*
        </label>
        <input
          type="date"
          class="form-control form-date"
          [class.form-invalid]="getControlStatus('date', ['required'])"
          id="date"
          formControlName="date"
        />
      </div>
      <div>
        <button
          type="submit"
          class="btn btn-primary me-2"
          [disabled]="!form.valid"
          *ngIf="!interviewId"
        >
          Ajouter
        </button>
        <button
          type="submit"
          class="btn btn-primary me-2"
          [disabled]="!form.valid"
          *ngIf="interviewId"
        >
          Modifier
        </button>
        <a class="btn btn-danger" [routerLink]="['/']">Annuler</a>
      </div>
    </form>
  </div>
</div>
